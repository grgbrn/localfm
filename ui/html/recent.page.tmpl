{{template "base" .}}

{{define "title"}}Recent Activity{{end}}

{{define "header"}}{{end}}

{{define "body"}}
  {{template "topnav" "recent"}}

  <!-- try putting template blocks first for now -->
  <template id="recent_template">
    <tr>
      <td><img class="coverimg" src="" alt=""></td>
      <td><em>TITLE</em><br><span>ARTIST</span></td>
      <td title="tooltip">TIMESTAMP</td>
    </tr>
  </template>

  <template id="date_title">
    <tr>
      <td class="listtitle" colspan="3">WHEN</td>
    </tr>
  </template>

  <div id="monthly-pagegrid">
    <!-- prev/next links  -->
    {{template "nextbar" .}}

    <!-- tracks tile -->
    <div class="mtracks">
      <table class="listview"> 

        {{if .Tracks}}
          {{ $headerDate := (index .Tracks 0).Time.Format "Mon Jan 2 2006" }}
          <tr>
            <td class="listtitle" colspan="3">{{ $headerDate }}</td>
          </tr>

          {{range .Tracks}}

          <!-- maybe needs a new date separator -->
          {{ if (ne (.Time.Format "Mon Jan 2 2006") $headerDate) }}
            {{ $headerDate = .Time.Format "Mon Jan 2 2006" }}
            <tr>
              <td class="listtitle" colspan="3">{{ $headerDate }}</td>
            </tr>
          {{ end }}

          <tr>
            <td><img class="coverimg" src="{{ index .ImageURLs 0}}" alt=""></td>
            <td><em>{{.Title}}</em><br><span>{{.Artist}}</span></td>
            <td title="{{.Time}}">{{.Time.Format "3:04PM" }}</td>
          </tr>
          {{end}}

        {{else}}
        <tr><td>nothing to see here!</td></tr>
        {{end}}

      </table>
    </div>

  </div>

  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', (e) => {
      //initRecentPage()
    })
  </script>
{{end}}
