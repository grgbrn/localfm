{{template "base" .}}

{{define "title"}}Monthly{{end}}

{{define "header"}}
  <!-- chart deps -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
{{end}}

{{define "body"}}
  <!-- try putting template blocks first for now -->
  <template id="trackrow_template">
    <tr>
      <td>TRACKNUM</td>
      <td><img class="coverimg" src="" alt=""></td>
      <td><em>TITLE</em><br><span>ARTIST</span></td>
      <td>COUNT</td>
    </tr>
  </template>

  <template id="artistrow_template">
    <tr>
      <td><img class="avatar" src="" alt=""></td>
      <td><em>ARTIST</em><br><span>COUNT</span> tracks</td>
    </tr>
  </template>

  <!-- begin visible page content -->

  <div class="topnav">
    <a href="/recent">Recent</a>
    <a class="active" href="/monthly">Monthly</a>
    <a href="/artists">Artists</a>
    <a href="#about">About</a>
  </div>

  <div id="monthly-pagegrid">
    <!-- combo title / date control -->
    <div class="datebar">
      <div class="datebar-title">
        Popular Tracks: <span id="datebar-title-label"></span>
      </div>
      <div class="datebar-controls">
        <div>
          <a id="prevlink" href="#">&#8592; Previous <span id="datebar-prev-label">Month</span></a>
        </div>

        <div>Show
          <select name="daterange" id="daterange">
            <option value="week">Week</option>
            <option selected=1 value="month">Month</option>
            <option value="year">Year</option>
          </select>
        </div>

        <div>
          <a id="nextlink" href="#">Next <span id="datebar-next-label">Month</span> &#8594;</a>
        </div>
      </div>
    </div>

    <!-- tracks tile -->
    <div class="mtracks">
      <table class="listview">
        <tbody>
          <tr>
            <td>&nbsp;loading...</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- sidebar container with multiple sub-tiles -->
    <div class="sidebar-container">
      <!-- chart tile (kind of ugly) -->
      <div class="chartcontainer">
        <canvas id="myChart"></canvas>
      </div>

      <!-- new artists tile -->
      <div class="newartists">
        <h3>New Artists</h3>
        <table class="tinylist">
          <tbody>
            <tr>
              <td>loading...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>


  </div>

  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', (e) => {
      initMonthlyPage()
    })
  </script>
{{end}}